\documentclass[]{elsarticle} %review=doublespace preprint=single 5p=2 column
%%% Begin My package additions %%%%%%%%%%%%%%%%%%%
\usepackage[hyphens]{url}
\usepackage{lineno} % add
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}

%\bibliographystyle{elsarticle-harv}
%\biboptions{sort&compress} % For natbib
\usepackage{graphicx}
\usepackage{booktabs} 


% A modified page layout
\textwidth 6.75in
\oddsidemargin -0.15in
\evensidemargin -0.15in
\textheight 9in
\topmargin -0.5in
%%%%%%%%%%%%%%%% end my additions to header

\usepackage[T1]{fontenc}
\usepackage{lmodern}
\usepackage{amssymb,amsmath}
\usepackage{ifxetex,ifluatex}
% use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\ifnum 0\ifxetex 1\fi\ifluatex 1\fi=0 % if pdftex
  \usepackage[utf8]{inputenc}
\else % if luatex or xelatex
  \usepackage{fontspec}
  \ifxetex
    \usepackage{xltxtra,xunicode}
  \fi
  \defaultfontfeatures{Mapping=tex-text,Scale=MatchLowercase}
  \newcommand{\euro}{â‚¬}
\fi
% use microtype if available
\IfFileExists{microtype.sty}{\usepackage{microtype}}{}
\ifxetex
  \usepackage[setpagesize=false, % page size defined by xetex
              unicode=false, % unicode breaks when used with xetex
              xetex]{hyperref}
\else
  \usepackage[unicode=true]{hyperref}
\fi
\hypersetup{breaklinks=true,
            bookmarks=true,
            pdfauthor={},
            pdftitle={Neuroconductor: A Framework for Reproducible Neuroimaging Analysis in R},
            colorlinks=true,
            urlcolor=blue,
            linkcolor=magenta,
            pdfborder={0 0 0}}
\urlstyle{same}  % don't use monospace font for urls
\setlength{\parindent}{0pt}
\setlength{\parskip}{6pt plus 2pt minus 1pt}
\setlength{\emergencystretch}{3em}  % prevent overfull lines
\setcounter{secnumdepth}{0}
% Pandoc toggle for numbering sections (defaults to be off)
\setcounter{secnumdepth}{0}
% Pandoc header


\usepackage[nomarkers]{endfloat}
\usepackage{color}
\newcommand{\fixme}[1]{{\color{red} #1}}
\begin{document}
\begin{frontmatter}

  \title{Neuroconductor: An R platform for Neuroimaging}
    \author[JHU]{John Muschelli\corref{c1}}
   \ead{jmusche1@jhu.edu} 
   \cortext[c1]{Corresponding Author}
    \author[Penn]{Jean-Philippe Fortin}
   \ead{fortin946@gmail.com} 
  
    \author[JHU]{Adrian Gherman}
   \ead{adig@jhu.edu} 
  
    \author[JHU]{Brian S. Caffo}
   \ead{bcaffo@jhsph.edu} 
  
    \author[JHU]{Ciprian M. Crainiceanu}
   \ead{ccraini1@jhu.edu} 
  
      \address[JHU]{Johns Hopkins Bloomberg School of Public Health, Department of
Biostatistics, 615 N Wolfe St, Baltimore, MD, 21205}
    \address[Penn]{Perelman School of Medicine, University of Pennsylvania, Department of
Biostatistics and Epidemiology, 423 Guardian Drive, Philadelphia, PA
19104}
  
  \begin{abstract}
Neuroconductor is an open-source platform for rapid testing and dissemination of reproducible computational imaging software. The goals of the project are to: 1) provide a centralized repository of R software dedicated to image analysis; 2) disseminate quickly software updates; 3) educate a large, diverse community of scientists using detailed tutorials and short courses; 4) ensure quality via automatic and manual quality controls; and 5) promote reproducibility of image data analysis. Based on the  programming language R, Neuroconductor starts with \fixme{24} inter-operable packages that cover multiple areas of imaging including visualization, preprocessing, and post-processing. Neuroconductor accepts new R package submissions, which are subject to a formal review and continuous automated testing. We provide a description of Neuroconductor's front-end with emphasis on the experience of the user and contributor as well as backend.   
  \end{abstract}
 
 \end{frontmatter}

% Introduction
\section{Introduction}\label{introduction}

Neuroimaging software is heterogeneous, complex, and hard to use in fully reproducible analytic pipelines. These problems have been accentuated by the diversity of new imaging datasets and associated scientific problems. Indeed, many studies now collect data on thousands of subjects, at multiple visits, using different modalities. Storing, understanding, and analyzing such data is a daunting task. Doing that in a reproducible fashion and transparently is the primary goal of Neuroconductor.
 
Efforts such as NiPype, SPM and related tools, have made great strides, since python and Matlab are such popular scripting languages for analysis, and have robust implementations across
all popular operating systems and environments. Creating reproducible python analyses and processing has notably improved, in particular, with the introduction of Jupyter IPython notebooks.

The R scripting language has much to offer as a potential environment
for neuroimaging data analysis \fixme{cite Ani's article and the neuroimage articles about R THE}. Like python, R is open source, free and
robustly implemented across every major computing environment and OS.
With the growth of complex neuroimaging data, sophisticated statistical
methods and machine learning methods are necessary, which R can offer.
It also has a very large and growing user base \fixme{NUMBERS} as well a
highly developed and motivated open source developer base, creating an
enormous collection of statistics and machine learning packages. The
Comprehensive R Archive Network (CRAN) has over 9,000 packages on CRAN
and Bioconductor has 1295 software packages. Recent advances in R have
made multi-threading, GPU processing and parallel processing trivial.
Moreover, with the introduction of the knitr package and RMarkdown
format, R has one of the most robust tools for reproducible research. In
addition, interactive web application development is now possible (and
easy) with Shiny. Finally, the RStudio environment gives a powerful and
popular IDE for R. (http://r4stats.com/articles/popularity/)

R has a strong package authoring and management system, which has a
large system of checks to ensure inter-operability inspiring. The
Comprehensive R Archive Network (CRAN) is a primary repository for R
packages. In addition, domain specific repositories, notably
Bioconductor, also host a large number of packages. A legion of
developers, coupled with dedicated repository maintainers and mirrors
and the amazing growth of packages with over 9,000 package at last count
on CRAN alone. CRAN maintains ``task views'' to list packages relevant
for specific domains. The medical imaging task view lists \fixme{27} packages
for medical image analysis.

CRAN has numerous limitations as a community repository for a domain,
such as medical or neuroimaging. Some of the key shortcomings to be
addressed include: stricter package requirements in the form of
documentation and style, version control integration, development
versions of packages, continuous integration and lower repository
maintainer requirements / involvement. In computational biology, the
Bioconductor repository was created to address some of these
shortcomings. However, since the creation of CRAN and Bioconductor,
several new developments have occurred to inspire the creation of a
package repository specific to Neuroimaging. An influential development
is the overwhelming use of git and github for version control and
package development. In addition, continuous integration tools, like
travis.ci allow package building in the cloud.

\section{Description or table of current packages}

\section{Example of a cross-package Neuroconductor workflow: preprocessing of structural MRIs}

\section{Case study of a statistical analysis}

\begin{enumerate}
\item Reading data with package \texttt{hcp}: diffusion + T1-w
\item Creating diffusion tensor images with \texttt{rcamino} 
\item Nonlinear registration of the FA and MD maps to a template
\item Creation of a matrix with the \texttt{nifti2matrix} function
\item Visualization of the Fa and MD maps
\item Voxel-wise t-statistics, glm, gee, etc .. 
\end{enumerate}



\section{Visualization}


\section{Notes / Other stuff}

\subsection{Goals of Neuroconductor}\label{goals-of-neuroconductor}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Provide a unified neuroimaging framework for R packages
\item
  Provide developers an infrastructure to test package with external
  dependencies
\item
  Expand the statistical tools available to neuroimaging analysis
\item
  Make neuroimaging analysis accessible by providing clear workflows for
  a broad audience of users
\end{enumerate}

\subsubsection{Why R?}\label{why-r}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\setcounter{enumi}{2}
\tightlist
\item
  Leverage R resources/plotting/reproducibility/package development
\item
  Leverage Bioconductor resources - they have similar problems, years of
  testing, and code
\item
  Bayesian Statistics
\end{enumerate}

\subsection{Additional Checks}\label{additional-checks}

\subsubsection{Third Party Software}\label{third-party-software}

\begin{itemize}
\tightlist
\item
  FSL
\item
  AFNI
\item
  FREESURFER
\item
  SPM
\end{itemize}

We will refer to R-Forge, OmegaHat, and CRAN as standard
repositories.

\subsection{Devtools}\label{devtools}

In YEAR, Hadley and RStudio had published the \texttt{devtools} package.
The \texttt{devtools} package provided the tools to install R packages
from a multitude of sources. The Neuroconductor relies on the
installation script for R packages on GitHub. Moreover, it allowed for
the introduction of a flag in the installation of an R package (the
\texttt{Remotes:} field) that allowed users specify a dependency for the
package that can be located on a source that is not a standard
repository. Previous to this, if a package depended on a package that
was not in a standard repository, the user would have to manually
install that dependency before installing the package in question.

In addition to installing packages from GitHub, there are additional
options to the installer scripts, which allow users to install specific
snapshots of these packages. These snapshots can be based on GitHub
commit identifiers (IDs), tags, or referrences.

The \texttt{remotes} package provides a lightweight version of the
\texttt{devtools} package for installing from non-standard and standard
sources.

In addition to the install functions, the \texttt{devtools} package
allows for a up-to-date R package development system. The RStudio IDE
integrates the \texttt{devtools} package so that R package development
can be done in a more standardized way.

\subsection{GitHub}\label{github}

GitHub APi. Git vs.~svn.

\subsection{TRAVIS}\label{travis}

Seperately from any development in the R community, continuous
integration (CI) services have become largely available that allows for
automated building and checking of software. The Travis CI is a
``hosted, distributed continuous integration service used to build and
test software projects hosted at GitHub''. In conjuction with the R
community, Travis CI has configured the ability to seamlessly check R
packages on multiple systems. In addition to the GitHub API described
above, the Travis CI API provides an automated system for checking R
package installation.

\subsubsection{DRAT}\label{drat}

The \texttt{drat} (Drat R Archive Template) package has provided a
template to set up a repository similar to CRAN mirrors and other
standard sources. One of the large benefits of using a drat repository
is that users can use the default way of installing packages in R
(\texttt{install.packages}) versus that from \texttt{devtools} (e.g.
\texttt{install\_github}) and requires no additional dependencies such
as \texttt{devtools} or \texttt{remotes}.

One good example of a drat repository is
\href{https://ropensci.org/}{ROpenSci}, which has a series of packages
that are based on GitHub. The only additional step for installing from a
drat repository is to specify the \texttt{repos} argument in
\texttt{install.packages}:
\texttt{install.packages("package\_name",\ repos="http://path/to/drat/repo")}.

\subsection{Bioconductor}

In 2004, the Bioconductor system enabled the bioinformatics and genomics
work of R users to be more integrated and systemized\citep{gentleman2004bioconductor,huber2015orchestrating}.

\subsection{Data Packages}\label{data-packages}

Like Bioconductor, we need data packages that allow users to test
software and examples on.

\bibliographystyle{plainnat}
\bibliography{Neuroconductor}

%\section*{References}\label{references}
%\addcontentsline{toc}{section}{References}
%
%\hypertarget{refs}{}
%\hypertarget{ref-carpux5fsecretux5f2012}{}
%Carp, Joshua. 2012. ``The Secret Lives of Experiments: Methods Reporting
%in the fMRI Literature.'' \emph{NeuroImage} 63 (1): 289--300.
%doi:\href{https://doi.org/10.1016/j.neuroimage.2012.07.004}{10.1016/j.neuroimage.2012.07.004}.
%
%\hypertarget{ref-gentleman2004bioconductor}{}
%Gentleman, Robert C, Vincent J Carey, Douglas M Bates, Ben Bolstad,
%Marcel Dettling, Sandrine Dudoit, Byron Ellis, et al. 2004.
%``Bioconductor: Open Software Development for Computational Biology and
%Bioinformatics.'' \emph{Genome Biology} 5 (10). BioMed Central: 1.

\end{document}


